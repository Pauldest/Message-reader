<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Reader Control Center</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
</head>

<body class="dark-theme">
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <span class="icon">âš¡</span>
                <h1>Message Reader</h1>
            </div>

            <nav class="nav-menu">
                <button class="nav-item active" data-target="dashboard">
                    <span class="icon">ğŸ“Š</span> ä»ªè¡¨ç›˜
                </button>
                <button class="nav-item" data-target="feeds">
                    <span class="icon">ğŸ“¡</span> è®¢é˜…æº
                </button>
                <button class="nav-item" data-target="database">
                    <span class="icon">ğŸ’¾</span> æ•°æ®åº“
                </button>
            </nav>

            <div class="status-panel">
                <h3>System Status</h3>
                <div class="status-item">
                    <span>State:</span>
                    <span id="system-state" class="badge idle">Idle</span>
                </div>
                <div class="status-item">
                    <span>Mode:</span>
                    <span id="system-mode">Loading...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="top-bar">
                <h2 id="page-title">ä»ªè¡¨ç›˜</h2>
                <div class="controls">
                    <button id="btn-run" class="btn primary">
                        <span class="icon">â–¶</span> è¿è¡ŒæŠ“å– & åˆ†æ
                    </button>
                    <button id="btn-digest" class="btn secondary">
                        <span class="icon">ğŸ“§</span> ä»…ç”Ÿæˆæ—¥æŠ¥
                    </button>
                    <button id="btn-stop" class="btn danger" disabled>
                        <span class="icon">â¹</span> åœæ­¢
                    </button>
                </div>
            </header>

            <!-- Dashboard View -->
            <div id="view-dashboard" class="view-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>ä»Šæ—¥æŠ“å–</h3>
                        <p class="stat-value" id="stat-fetched">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>AI åˆ†æ</h3>
                        <p class="stat-value" id="stat-analyzed">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>æœªå‘é€</h3>
                        <p class="stat-value" id="stat-unsent">-</p>
                    </div>
                </div>

                <div class="logs-container">
                    <div class="logs-header">
                        <h3>å®æ—¶è¿è¡Œæ—¥å¿—</h3>
                        <div class="logs-actions">
                            <button id="btn-clear-logs" class="btn small">æ¸…é™¤</button>
                            <label><input type="checkbox" id="auto-scroll" checked> è‡ªåŠ¨æ»šåŠ¨</label>
                        </div>
                    </div>
                    <div id="terminal-output" class="terminal-window">
                        <!-- Logs will appear here -->
                        <div class="log-entry system">ç­‰å¾…è¿æ¥ WebSocket...</div>
                    </div>
                </div>
            </div>

            <!-- Feeds View -->
            <div id="view-feeds" class="view-section">
                <div class="actions-bar">
                    <input type="text" id="feed-url-input" class="input-field" placeholder="RSS/Atom URL (å¿…å¡«)"
                        style="flex: 2">
                    <input type="text" id="feed-name-input" class="input-field" placeholder="åç§° (å¯é€‰, è‡ªåŠ¨è·å–)"
                        style="flex: 1">
                    <input type="text" id="feed-category-input" class="input-field" placeholder="åˆ†ç±» (å¯é€‰)"
                        style="flex: 1">
                    <button id="btn-add-feed" class="btn primary">
                        <span class="icon">â•</span> æ·»åŠ è®¢é˜…
                    </button>
                </div>
                <div class="feeds-list" id="feeds-list-container">
                    <table class="feeds-table">
                        <thead>
                            <tr>
                                <th width="80">çŠ¶æ€</th>
                                <th width="200">åç§°</th>
                                <th width="120">åˆ†ç±»</th>
                                <th>URL</th>
                                <th width="80">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="feeds-table-body">
                            <!-- Feeds loaded via JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Database View -->
            <div id="view-database" class="view-section">
                <div class="tabs">
                    <button class="tab-btn active" data-table="articles">æ–‡ç« åˆ—è¡¨</button>
                    <button class="tab-btn" data-table="info_units">ä¿¡æ¯å•å…ƒ</button>
                </div>
                <div class="data-grid-container">
                    <table class="data-grid">
                        <thead id="db-table-head">
                            <!-- Headers -->
                        </thead>
                        <tbody id="db-table-body">
                            <!-- Rows -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination">
                    <button id="btn-prev-page" class="btn small">ä¸Šä¸€é¡µ</button>
                    <span id="page-info">Page 1</span>
                    <button id="btn-next-page" class="btn small">ä¸‹ä¸€é¡µ</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Templates -->
    <template id="log-entry-template">
        <div class="log-entry">
            <span class="log-time"></span>
            <span class="log-level"></span>
            <span class="log-logger"></span>
            <span class="log-message"></span>
        </div>
    </template>

    <script src="/static/js/app.js"></script>
</body>

</html>