"""AI Prompt 模板"""

SYSTEM_PROMPT = """你是一位严厉的编辑，任务是帮助用户筛选真正有价值的内容，打破信息茧房。

你的评判标准非常严格：

❌ 低分内容（1-4分）：
- 标题党：夸张标题，内容空洞
- 软文广告：变相推销产品或服务
- 旧闻翻炒：无新信息，炒冷饭
- 低信息密度：废话太多，干货太少
- 情绪煽动：制造焦虑恐惧，无实质内容
- 抄袭搬运：缺乏原创见解

✅ 高分内容（7-10分）：
- 原创深度分析：有独到见解和深入思考
- 独家信息/数据：提供独特的信息源
- 实用技术教程：可操作性强，能学到东西
- 行业趋势洞察：对未来发展有前瞻性判断
- 优质信息整理：虽非原创但整理有价值

中等内容（5-6分）：
- 有一定价值但不够突出
- 信息质量中等

请用中文回复。"""

FILTER_PROMPT = """请分析以下文章列表，为每篇文章：
1. 打分（1-10分）
2. 给出一句话核心摘要
3. 分配多层级标签（从宏观到微观，2-4个层级）

文章列表：
{articles_text}

【标签层级说明】
标签应从宏观到微观，反映文章的分类体系。例如：
- ["科技", "人工智能", "大语言模型", "GPT"]
- ["商业", "创业", "融资"]
- ["技术", "编程", "Python", "Web开发"]
- ["生活", "效率", "时间管理"]
- ["财经", "投资", "股票", "A股"]

常用一级标签：科技、技术、商业、财经、产品、设计、生活、职场、教育、健康

请严格按照以下 JSON 格式返回结果，不要添加任何其他内容：
```json
{{
  "articles": [
    {{
      "index": 0,
      "score": 7.5,
      "summary": "一句话概括文章核心观点",
      "reasoning": "给这个分数的简短理由",
      "tags": ["一级标签", "二级标签", "三级标签"]
    }}
  ]
}}
```

注意：
1. index 对应文章在列表中的位置（从0开始）
2. score 为 1-10 的浮点数，请严格评分
3. summary 必须是一句话，不超过50字
4. reasoning 简短说明打分理由
5. tags 为 2-4 个层级的标签数组，从宏观到微观排列"""

TOP_SELECTION_PROMPT = """从以下已评分的文章中，选出 {count} 篇最值得花时间深度阅读的文章。

已评分文章：
{articles_text}

{history_section}

选择标准（按重要性排序）：
1. 信息价值：能否带来新知识、新洞察、或改变认知
2. 时效性：是否是需要及时了解的重要信息
3. 深度质量：是否有独到分析和深入思考
4. 可操作性：是否能指导实际行动或决策
5. 多样性：避免选择主题过于相似的文章
6. 避免重复：不要选择与"最近已发送的文章"主题相同或高度相似的内容

请返回选中文章的索引列表，严格按照 JSON 格式：
```json
{{
  "top_picks": [0, 3, 5, 7, 12],
  "selection_reasoning": "简要说明选择理由"
}}
```

注意：返回的索引必须存在于文章列表中。"""

BATCH_SUMMARY_PROMPT = """请为以下文章生成一句话核心摘要，帮助读者快速了解内容：

{articles_text}

请严格按照以下 JSON 格式返回：
```json
{{
  "summaries": [
    {{"index": 0, "summary": "一句话摘要"}},
    {{"index": 1, "summary": "一句话摘要"}}
  ]
}}
```"""

MERGE_PROMPT = """请分析以下已评分的文章列表，找出报道同一事件或讨论同一话题的文章，并将它们合并。

文章列表：
{articles_text}

【合并规则】
1. 多篇文章报道同一新闻事件 → 合并为一条，保留最高分作为代表
2. 多篇文章讨论同一技术/产品 → 合并为一条，保留分析最深入的
3. 不同角度、不同事件的文章 → 不合并，各自保留
4. 合并后的文章应该生成一个综合摘要

请返回合并结果，严格按照 JSON 格式：
```json
{{
  "merged_groups": [
    {{
      "representative_index": 0,
      "merged_indices": [0, 5, 12],
      "merged_summary": "综合多篇报道的核心摘要",
      "merge_reason": "这3篇文章都在报道同一事件"
    }},
    {{
      "representative_index": 3,
      "merged_indices": [3],
      "merged_summary": "保持原摘要",
      "merge_reason": "独立话题，无需合并"
    }}
  ]
}}
```

注意：
1. representative_index 是合并后保留的代表文章索引
2. merged_indices 包含被合并的所有文章索引（包括代表文章）
3. 如果文章主题独立，merged_indices 就只包含它自己
4. 每篇文章只能出现在一个 merged_group 中
5. 所有文章都必须被分配到某个 merged_group"""


