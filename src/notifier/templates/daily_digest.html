<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI é˜…è¯»ç®€æŠ¥ - {{ date_str }}</title>
</head>

<body
    style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif; max-width: 700px; margin: 0 auto; padding: 20px; background: #f9fafb; line-height: 1.6;">

    <!-- å¤´éƒ¨ -->
    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="margin: 0; font-size: 28px; color: #1f2937;">ğŸ“¬ AI é˜…è¯»ç®€æŠ¥</h1>
        <p style="color: #6b7280; margin: 10px 0 0 0;">{{ date_str }}</p>
    </div>

    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <table width="100%" cellpadding="0" cellspacing="0" style="margin-bottom: 30px;">
        <tr>
            <td align="center">
                <table cellpadding="0" cellspacing="10">
                    <tr>
                        <td
                            style="background: white; padding: 15px 25px; border-radius: 10px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <div style="font-size: 24px; font-weight: bold; color: #3b82f6;">{{ digest.total_fetched }}
                            </div>
                            <div style="font-size: 12px; color: #6b7280;">æŠ“å–æ–‡ç« </div>
                        </td>
                        <td
                            style="background: white; padding: 15px 25px; border-radius: 10px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <div style="font-size: 24px; font-weight: bold; color: #10b981;">{{ digest.total_analyzed }}
                            </div>
                            <div style="font-size: 12px; color: #6b7280;">AI åˆ†æ</div>
                        </td>
                        <td
                            style="background: white; padding: 15px 25px; border-radius: 10px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                            <div style="font-size: 24px; font-weight: bold; color: #8b5cf6;">{{ digest.top_picks |
                                length }}</div>
                            <div style="font-size: 12px; color: #6b7280;">ç²¾é€‰æ¨è</div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

    <!-- ç²¾é€‰æ–‡ç«  -->
    {% if digest.top_picks %}
    <div style="margin-bottom: 40px;">
        <h2 style="font-size: 20px; color: #1f2937; margin-bottom: 20px;">ğŸŒŸ ä»Šæ—¥ç²¾é€‰ Â· å€¼å¾—æ·±è¯»</h2>

        {% for article in digest.top_picks %}
        <div
            style="margin-bottom: 24px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white;">
            <div style="margin-bottom: 12px;">
                <span
                    style="background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 20px; font-size: 12px; margin-right: 10px;">#{{
                    loop.index }} ç²¾é€‰</span>
                <span
                    style="background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 20px; font-size: 12px; margin-right: 10px;">â­
                    {{ "%.1f"|format(article.score) }}åˆ†</span>
                {% if article.tags %}
                <span
                    style="background: rgba(255,255,255,0.15); padding: 2px 8px; border-radius: 4px; font-size: 11px;">ğŸ·ï¸
                    {{ article.tags_display }}</span>
                {% endif %}
            </div>
            <h3 style="margin: 0 0 10px 0; font-size: 18px;">
                <a href="{{ article.url }}" style="color: white; text-decoration: none;">{{ article.title }}</a>
            </h3>
            <p style="margin: 0 0 10px 0; font-size: 14px; opacity: 0.9;">{{ article.summary | safe }}</p>
            <div style="font-size: 12px; opacity: 0.8;">
                ğŸ“° {{ article.source }}{% if article.event_time %} Â· ğŸ“… {{ article.event_time }}{% endif %}
            </div>
            {% if article.reasoning %}
            <div
                style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; font-size: 13px;">
                <strong>ç¼–è¾‘ç‚¹è¯„ï¼š</strong>{{ article.reasoning }}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- å…¶ä»–æ–‡ç« é€Ÿè§ˆ -->
    {% if digest.other_articles %}
    <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <h2 style="font-size: 18px; color: #1f2937; margin: 0 0 15px 0;">ğŸ“‹ é€Ÿè§ˆåˆ—è¡¨</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="border-bottom: 2px solid #e5e7eb;">
                    <th style="text-align: left; padding: 10px 0; color: #6b7280; font-weight: 500;">æ–‡ç« </th>
                    <th style="text-align: center; padding: 10px 0; color: #6b7280; font-weight: 500; width: 60px;">è¯„åˆ†
                    </th>
                    <th style="text-align: left; padding: 10px 0; color: #6b7280; font-weight: 500; width: 80px;">æ¥æº
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for article in digest.other_articles %}
                <tr style="border-bottom: 1px solid #e5e7eb;">
                    <td style="padding: 12px 0;">
                        <a href="{{ article.url }}" style="color: #1f2937; text-decoration: none; font-weight: 500;">{{
                            article.title }}</a>
                        <div style="color: #6b7280; font-size: 13px; margin-top: 4px;">{{ article.summary }}</div>
                        <div style="color: #9ca3af; font-size: 11px; margin-top: 2px;">ğŸ·ï¸ {{ article.tags_display }}
                        </div>
                    </td>
                    <td style="padding: 12px 0; text-align: center;">
                        {% if article.score >= 7 %}
                        <span style="color: #22c55e; font-weight: bold;">{{ "%.1f"|format(article.score) }}</span>
                        {% elif article.score >= 5 %}
                        <span style="color: #eab308; font-weight: bold;">{{ "%.1f"|format(article.score) }}</span>
                        {% else %}
                        <span style="color: #ef4444; font-weight: bold;">{{ "%.1f"|format(article.score) }}</span>
                        {% endif %}
                    </td>
                    <td style="padding: 12px 0; color: #6b7280; font-size: 13px;">
                        {{ article.source }}{% if article.event_time %}<br><span style="color: #9ca3af;">ğŸ“… {{
                            article.event_time }}</span>{% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <!-- é¡µè„š -->
    <div style="text-align: center; margin-top: 40px; padding: 20px; color: #9ca3af; font-size: 13px;">
        <p style="margin: 0 0 5px 0;">æœ¬ç®€æŠ¥ç”± AI é˜…è¯»åŠ©æ‰‹è‡ªåŠ¨ç”Ÿæˆ</p>
        <p style="margin: 0;">ä½ æ˜¯ç®—æ³•çš„ä¸»äººï¼Œä¸æ˜¯ç®—æ³•çš„å¥´éš¶ ğŸš€</p>
    </div>

</body>

</html>